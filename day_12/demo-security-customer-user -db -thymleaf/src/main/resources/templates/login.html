<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
    <h1>form Login</h1>
    <form id="form-login">
        <div>
            <label>
                Email
                <input type="text" name="email" id="email"/>
            </label>
        </div>
        <div>
            <label>
                Password
                <input type="password" name="password" id="password"/>
            </label>
        </div>
        <div>
            <button type="submit">dang nhap</button>
        </div>
    </form>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    const formLogin = document.querySelector("#form-login")
    const emailEl = document.querySelector("#email")
    const passwordEl = document.querySelector("#password")

    formLogin.addEventListener("submit", async (e) =>{
        e.preventDefault()

        const data = {
            email: emailEl.value,
            password: passwordEl.value
        }
        try{
            const res = await axios.post("http://localhost:8080/api/v1/auth/login", data)
            console.log(res)
            if(res.status === 200){
                alert(res.data)
                setTimeout(()=>{
                    window.location.href = "/"
                },1000)
            }else {
                alert("dang nhap that bai")
            }
        }catch (e) {
            alert(e.response.data.message)
        }
    })
</script>

</body>
</html>